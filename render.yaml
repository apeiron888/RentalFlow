services:
  - type: web
    name: rentalflow-backend
    runtime: docker
    dockerFilePath: ./Dockerfile.render
    envVars:
      - key: LOG_LEVEL
        value: info
      # Database Connections (will be auto-populated by Render if we link specific DBs, 
      # but standard environment vars need to be mapped)
      - key: RENTALFLOW_DATABASE_HOST
        fromService: rentalflow-db
        property: host
      - key: RENTALFLOW_DATABASE_PORT
        fromService: rentalflow-db
        property: port
      - key: RENTALFLOW_DATABASE_USER
        fromService: rentalflow-db
        property: user
      - key: RENTALFLOW_DATABASE_PASSWORD
        fromService: rentalflow-db
        property: password
      - key: RENTALFLOW_DATABASE_NAME
        fromService: rentalflow-db
        property: database
      
      # Redis Connection
      - key: RENTALFLOW_REDIS_HOST
        fromService: rentalflow-redis
        property: host
      - key: RENTALFLOW_REDIS_PORT
        fromService: rentalflow-redis
        property: port
        
      # Secrets (Should be manual or sync)
      - key: JWT_SECRET
        generateValue: true
      - key: JWT_EXPIRY
        value: 24h

databases:
  - name: rentalflow-db
    databaseName: rentalflow
    user: rentalflow
    plan: free # or starter, based on needs

  - name: rentalflow-redis
    plan: free # Redis free tier on Render
